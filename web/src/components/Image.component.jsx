import { useState, useEffect } from "react";

let placeholder =
  "data:image/webp;base64,UklGRoIFAABXRUJQVlA4WAoAAAAgAAAAVwIAjwEASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZWUDgglAMAAJBFAJ0BKlgCkAE+KRSJQ6GhIRAqTBgYAoS0t3C7sI35rfN6zvfr7nMTCALmUA95prOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06OXELYdH0N/f7KisnYgUB0DlWudQpjIEbX06dOnTp06dOnTfnZ1jQDwN9SNxPTSv45tEJHO8tu+578LvbGAc5dtXke5PDEdfrCRAiiXqekPtdt0Mis6dOnTp06dOnTp0coqRVJgti/II0Zyxyx01e2n4gu75pRimkChH+lAljlFnECFq/PcYQ7N1K6s9w7s+s6dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTfAAA/v/uHAAAAAAAAAAAAAAIloGOdZOuBHdU7BM4I4FNWXWYF5DK0IzMV5kSqQ1EJCuD6Ue3tsnkm2ffc0xxhwfsn05mudAk7ad/W4+WGDUkTj5MwL1IOlLC475LDFVaoIEdlnzcFpQoO1HL5cGqUNZcHsnA2fOKk26QejTpHntiXypmb/yDIN2sl8YN7bXZHbdKAuWrq/XbgjvWz53mbyQNQvxkUwDx+mYkCKerh+J7U/19MdsQBkCX0YaVa3kLT42WMbtuc20h4TEibJEVan7yI2oORlFelGgMcgJiZEHfgJTETTXtLg6xeE4AUCWwEf9TcOs8Ml8D2nsf6IZAsaVUelTksVi3+aSafXxs10opiwN/erRapOhoRAf+V2F24rM+/tYn8ryLJuoWDEzgpQ1C2zazemjO2q6cb9v5TPav1vleH2SDJ0ADSdgjbZrQukzyAAAAAAAAAAAAAAAAAAA=";

export default function ImageComponent({ placeholderSrc = placeholder, src, alt, ...props }) {
  const [imgSrc, setImgSrc] = useState(placeholderSrc || src);

  useEffect(() => {
    const img = new Image();
    img.src = src;
    img.onload = () => {
      setImgSrc(src);
      //setImageToLocalStorage(src);
    };
    img.onerror = () => {
      // getImageToLocalStorage();
    };
  }, [src]);

  return <img {...{ src: imgSrc, ...props }} alt={alt || ""} loading="lazy" />;
}
